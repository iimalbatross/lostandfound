<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Invertis Care & Safe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />
</head>
<body>
  <div class="page">
      <header class="header">
        <div class="logo">Invertis Care &amp; Safe</div>
        <div class="platform-tabs">
          <button class="platform-tab active" data-platform="lost-found">
            Lost & Found
          </button>
          <button class="platform-tab" data-platform="campus-nav">
            Issue Reporting
          </button>
        </div>
      </header>

    <main>
      <!-- Lost & Found Platform -->
      <div id="lost-found-platform" class="platform-content active">
        <section class="hero">
          <div class="hero-text">
            <h1>Help Lost Items Find Their Way Home</h1>
            <p>
              Post lost or found items around campus so they can be returned to their owners quickly.
            </p>
          </div>
        </section>

        <section id="post-section" class="card form-section">
        <h2>Post Lost / Found Item</h2>
        <form id="item-form">
          <div class="form-row">
            <label>Type</label>
            <div class="radio-group">
              <label>
                <input type="radio" name="type" value="lost" checked />
                Lost
              </label>
              <label>
                <input type="radio" name="type" value="found" />
                Found
              </label>
            </div>
          </div>

          <div class="form-row">
            <label for="title">Item Title</label>
            <input
              id="title"
              name="title"
              type="text"
              placeholder="Eg. Black backpack, iPhone 13, Student ID card"
              required
            />
          </div>

          <div class="form-row">
            <label for="category">Category</label>
            <select id="category" name="category">
              <option value="Electronics">Electronics</option>
              <option value="Documents / ID">Documents / ID</option>
              <option value="Clothing">Clothing</option>
              <option value="Accessories">Accessories</option>
              <option value="Others">Others</option>
            </select>
          </div>

          <div class="form-row two-col">
            <div>
              <label for="location">Where was it lost/found?</label>
              <input
                id="location"
                name="location"
                type="text"
                placeholder="Eg. Library, CSE Block, Cafeteria"
              />
            </div>
            <div>
              <label for="date">Date</label>
              <input id="date" name="date" type="date" />
            </div>
          </div>

          <div class="form-row">
            <label for="description">Description</label>
            <textarea
              id="description"
              name="description"
              rows="3"
              placeholder="Describe color, brand, special marks, etc."
            ></textarea>
          </div>

          <div class="form-row">
            <label for="contact">Contact Info</label>
            <input
              id="contact"
              name="contact"
              type="text"
              placeholder="Email, phone, or room number"
            />
          </div>

          <div class="form-row">
            <label for="photo">Upload Item Image</label>
            <input id="photo" name="photo" type="file" accept="image/*" />
            <p class="hint">Optional, but helps people recognize the item.</p>
          </div>

          <button type="submit" class="btn-primary" id="submit-btn">
            <span class="btn-text">Post Item</span>
            <span class="btn-loader" style="display: none;">
              <span class="spinner"></span>
              Posting...
            </span>
          </button>
        </form>
      </section>

        <section id="list-section" class="list-section">
        <div class="list-header">
          <h2>Posted Items</h2>
          <div class="search-filters">
            <div class="search-box">
              <input 
                type="date" 
                id="search-date" 
                placeholder="Search by date"
                title="Search by date"
              />
              <button id="clear-search" class="btn-clear" style="display: none;" title="Clear search">√ó</button>
            </div>
            <div class="filters">
              <label for="filter-type">Filter:</label>
              <select id="filter-type">
                <option value="all">All</option>
                <option value="lost">Lost Only</option>
                <option value="found">Found Only</option>
              </select>
            </div>
          </div>
        </div>

        <div id="items-list" class="items-grid">
          <!-- Cards will be inserted here by JavaScript -->
        </div>
        <div id="loading-state" class="loading-state" style="display: none;">
          <div class="spinner-large"></div>
          <p>Loading items...</p>
        </div>
        </section>
      </div>

      <!-- Issue Reporting Platform -->
      <div id="campus-nav-platform" class="platform-content" style="display: none;">
        <section class="hero">
          <div class="hero-text">
            <h1>Issue Reporting</h1>
            <p>
              Report issues to keep campus safe and well-maintained.
            </p>
          </div>
        </section>

        <!-- Issue Reporting Section -->
        <section id="issue-reporting-section" class="card form-section">
          <form id="issue-form">
            <h2>Report an Issue</h2>
            <div class="form-row">
              <label for="issue-student-id">Student ID <span class="required">*</span></label>
              <input
                id="issue-student-id"
                name="issue-student-id"
                type="text"
                placeholder="Eg. BCA2025A12"
                pattern="[A-Za-z0-9]+"
                minlength="4"
                maxlength="20"
                required
              />
              <p class="hint">Only letters and numbers (no spaces). Mandatory for issue reporting.</p>
            </div>
            <div class="form-row">
              <label for="issue-type">Issue Type</label>
              <select id="issue-type" name="issue-type" required>
                <option value="">Select issue type...</option>
                <option value="infrastructure">Infrastructure</option>
                <option value="safety">Safety & Security</option>
                <option value="maintenance">Maintenance</option>
                <option value="cleanliness">Cleanliness</option>
                <option value="electrical">Electrical</option>
                <option value="plumbing">Plumbing</option>
                <option value="other">Other</option>
              </select>
            </div>

            <div class="form-row">
              <label for="issue-location">Location</label>
              <input
                id="issue-location"
                name="issue-location"
                type="text"
                placeholder="Eg. Library - 2nd Floor, CSE Block - Room 205"
                required
              />
            </div>

            <div class="form-row">
              <label for="issue-description">Description</label>
              <textarea
                id="issue-description"
                name="issue-description"
                rows="4"
                placeholder="Describe the issue in detail..."
                required
              ></textarea>
            </div>

            <div class="form-row">
              <label for="issue-priority">Priority</label>
              <div class="radio-group">
                <label>
                  <input type="radio" name="issue-priority" value="low" />
                  Low
                </label>
                <label>
                  <input type="radio" name="issue-priority" value="medium" checked />
                  Medium
                </label>
                <label>
                  <input type="radio" name="issue-priority" value="high" />
                  High
                </label>
                <label>
                  <input type="radio" name="issue-priority" value="urgent" />
                  Urgent
                </label>
              </div>
            </div>

            <div class="form-row">
              <label for="issue-photo">Upload Photo (Optional)</label>
              <input id="issue-photo" name="issue-photo" type="file" accept="image/*" />
              <p class="hint">A photo helps us understand the issue better.</p>
            </div>

            <div class="form-row">
              <label for="issue-contact">Your Contact (Optional)</label>
              <input
                id="issue-contact"
                name="issue-contact"
                type="text"
                placeholder="Email or phone number"
              />
            </div>

            <button type="submit" class="btn-primary" id="issue-submit-btn">
              <span class="btn-text">Submit Issue</span>
              <span class="btn-loader" style="display: none;">
                <span class="spinner"></span>
                Submitting...
              </span>
            </button>
          </form>
        </section>

        <!-- Reported Issues List -->
        <section id="issues-list-section" class="list-section">
          <div class="list-header">
            <h2>Reported Issues</h2>
            <div class="search-filters">
              <div class="filters">
                <label for="filter-issue-type">Filter:</label>
                <select id="filter-issue-type">
                  <option value="all">All Issues</option>
                  <option value="infrastructure">Infrastructure</option>
                  <option value="safety">Safety & Security</option>
                  <option value="maintenance">Maintenance</option>
                  <option value="cleanliness">Cleanliness</option>
                  <option value="electrical">Electrical</option>
                  <option value="plumbing">Plumbing</option>
                  <option value="other">Other</option>
                </select>
              </div>
              <div class="filters">
                <label for="filter-issue-priority">Priority:</label>
                <select id="filter-issue-priority">
                  <option value="all">All Priorities</option>
                  <option value="urgent">Urgent</option>
                  <option value="high">High</option>
                  <option value="medium">Medium</option>
                  <option value="low">Low</option>
                </select>
              </div>
            </div>
          </div>

          <div id="issues-list" class="items-grid">
            <!-- Issue cards will be inserted here by JavaScript -->
          </div>
          <div id="issues-loading-state" class="loading-state" style="display: none;">
            <div class="spinner-large"></div>
            <p>Loading issues...</p>
          </div>
        </section>
      </div>
    </main>

    <!-- Achievement Section -->
    <section id="achievement-section" class="achievement-section">
      <h2 class="achievement-heading">Achievements</h2>
      <p class="achievement-subtitle"></p>
      <div class="achievement-grid">
        <div class="achievement-card">
          <span class="achievement-icon" aria-hidden="true">üéØ</span>
          <span class="achievement-value" id="achievement-lost-found-count">0</span>
          <span class="achievement-label">Lost Items Found</span>
        </div>
        <div class="achievement-card">
          <span class="achievement-icon" aria-hidden="true">‚Ü©Ô∏è</span>
          <span class="achievement-value" id="achievement-found-returned-count">0</span>
          <span class="achievement-label">Found Items Returned</span>
        </div>
        <div class="achievement-card">
          <span class="achievement-icon" aria-hidden="true">‚úÖ</span>
          <span class="achievement-value" id="achievement-issues-resolved-count">0</span>
          <span class="achievement-label">Issues Resolved</span>
        </div>
        <div class="achievement-card achievement-card-total">
          <span class="achievement-icon" aria-hidden="true">üôå</span>
          <span class="achievement-value" id="achievement-total-helped-count">0</span>
          <span class="achievement-label">Total Helped</span>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>Invertis Care &amp; Safe Platform By ALBATROSS &copy; <span id="year"></span></p>
    </footer>

  </div>

  <!-- Toast Notification (global) -->
  <div id="toast" class="toast" role="alert" aria-live="polite">
    <span id="toast-message"></span>
    <button id="toast-close" class="toast-close" aria-label="Close">√ó</button>
  </div>

  <!-- Image Lightbox (full-size image on click) - outside .page so it opens on top -->
  <div id="image-lightbox" class="image-lightbox" role="dialog" aria-modal="true" aria-label="View image" aria-hidden="true">
    <button id="image-lightbox-close" class="image-lightbox-close" aria-label="Close">√ó</button>
    <img id="image-lightbox-img" src="" alt="Full size view" />
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js"></script>
</body>
</html>
